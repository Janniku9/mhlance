---
import { Icon } from 'astro-icon/components';
import type { GameNavigation } from '../../../types/Navigation';

interface Props {
  games: GameNavigation[];
  currentGame?: GameNavigation;
}

const { games, currentGame } = Astro.props;
---

<div class="relative group/nav">
  <button
    class="bg-primary hover:bg-primary-dark text-background px-4 py-2 rounded transition-colors flex items-center gap-2"
  >
    {currentGame?.title.toUpperCase() || 'SELECT GAME'}
    <Icon
      name="mingcute:down-fill"
      class="w-5 h-5 transition-transform duration-200 group-hover/nav:rotate-180"
    />
  </button>

  <div
    class="absolute right-0 top-full pt-3 opacity-0 invisible group-hover/nav:opacity-100 group-hover/nav:visible transition-all duration-200 z-50 transform origin-top scale-95 group-hover/nav:scale-100"
  >
    <div
      class="bg-background rounded-xl shadow-xl border border-text/10 p-4 min-w-[300px] animate-dropdown"
    >
      <ul class="space-y-2">
        {
          games.map((game, index) => (
            <li
              class="opacity-0 translate-y-2 group-hover/nav:opacity-100 group-hover/nav:translate-y-0 transition-all duration-200"
              style={`transition-delay: ${index * 50}ms`}
            >
              <a
                href={`/${game.game}`}
                class:list={[
                  'group flex items-center gap-3 p-3 rounded-lg transition-colors',
                  game.game === currentGame?.game
                    ? 'bg-primary/10 text-primary'
                    : 'text-text hover:bg-primary/10 hover:text-primary',
                ]}
              >
                <span class="text-2xl bg-text/5 rounded-lg p-2 w-12 h-12 flex items-center justify-center">
                  {game.emoji}
                </span>
                {game.title.toUpperCase()}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</div>

<style>
  @keyframes dropdown {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-dropdown {
    animation: dropdown 0.2s ease-out forwards;
  }
</style>
